sap.ui.define(["application/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/routing/History"],function(e,t,o,r,s){"use strict";return e.extend("application.controller.detalheProdutos",{onInit:function(){this.getRouter().getRoute("detalheProdutos").attachPatternMatched(this._onCreateModel,this)},_onCreateModel:function(){var e=this;var o=e.getModelGlobal("modelAux").getProperty("/CodRepres");e.oModel=e.getModelGlobal("modelAux").getProperty("/DBModel");e.oModel.read("/Centros",{urlParameters:{$filter:"IvUsuario eq '"+o+"'"},success:function(o){var r=[];e.vetorCentros=o.results;var s=new t(e.vetorCentros);e.setModel(s,"modelCentros")},error:function(t){e.onMensagemErroODATA(t)}});var r={Werks:""};var s=new t(r);e.setModel(s,"modelTela");var a=new t;e.setModel(a,"modelProduto");e.setModel(a,"modelProdutos")},onChangeCentro:function(e){var o=this;var r=o.getModelGlobal("modelAux").getProperty("/CodRepres");o.oModel=o.getModelGlobal("modelAux").getProperty("/DBModel");var s=e.getSource().getSelectedKey();o.byId("masterProdutos").setBusy(true);o.oModel.read("/Produtos",{urlParameters:{$filter:"IvUsuario eq '"+r+"'"},success:function(e){var r=[];o.vetorProdutos=e.results;var a=new t(o.vetorProdutos);for(var l=0;l<o.vetorProdutos.length;l++){}o.byId("masterProdutos").setBusy(false);o.setModel(a,"modelProdutos");o.onFilterCentro(s)},error:function(e){o.byId("masterProdutos").setBusy(false);o.onMensagemErroODATA(e)}})},onFilterCentro:function(e){var t=[];var o=[new sap.ui.model.Filter("Werks",sap.ui.model.FilterOperator.StartsWith,e)];var r=new sap.ui.model.Filter(o,false);t.push(r);this.byId("list").getBinding("items").filter(t,"Application")},onSelectionChange:function(e){var t=this;t.byId("detailProdutos").setBusy(true);var o=e.getParameter("listItem")||e.getSource();var r=o.getBindingContext("modelProdutos").getObject();t.getModel("modelProduto").setData(r);t.getSplitContObj().toDetail(this.createId("detail"));this.getSplitContObj().toDetail(this.createId("detail"));t.byId("detailProdutos").setBusy(false)},onNavBack:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("menuConsultas")},onPressDetailBack:function(){this.byId("list").removeSelections(true);this.getSplitContObj().backDetail()},onSearch:function(e){var t=this;var o=t.getModel("modelTela").getProperty("/Werks");var r=e.getSource().getValue();var s=[];var a=[new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.StartsWith,r),new sap.ui.model.Filter("Maktx",sap.ui.model.FilterOperator.Contains,r),new sap.ui.model.Filter("Werks",sap.ui.model.FilterOperator.Contains,o)];var l=new sap.ui.model.Filter(a,false);s.push(l);this.byId("list").getBinding("items").filter(s,"Application")},onPressModeBtn:function(e){var t=e.getSource().getSelectedButton().getCustomData()[0].getValue();this.getSplitContObj().setMode(t)},getSplitContObj:function(){var e=this.byId("SplitContDemoProdutos");if(!e){o.sap.log.error("SplitApp object can't be found")}return e}})});