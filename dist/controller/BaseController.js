sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/core/format/FileSizeFormat","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,r,t,o,n,i,a,s){"use strict";return e.extend("application.controller.BaseController",{init:function(){t.prototype.init.apply(this,arguments);this.getRouter().initialize()},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,r){return this.getView().setModel(e,r)},getModelGlobal:function(e){return this.getOwnerComponent().getModel(e)},setModelGlobal:function(e,r){return this.getOwnerComponent().setModel(e,r)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},onFormatHora:function(e){var r=Math.floor(e%1e3/100),t=Math.floor(e/1e3%60),o=Math.floor(e/(1e3*60)%60),n=Math.floor(e/(1e3*60*60)%24);n=n<10?"0"+n:n;o=o<10?"0"+o:o;t=t<10?"0"+t:t;return n+":"+o+":"+t},onNavBack:function(e){var t,o;t=r.getInstance();o=t.getPreviousHash();if(o!==undefined){window.history.go(-1)}else{this.getRouter().navTo("NotFound",{},true)}},containsSpecialChars:function(e){const r=/[`!@#$%^&*()_+\=\[\]{};':"\\|,<>\?~]/;return r.test(e)},formatAttribute:function(e){if(jQuery.isNumeric(e.ms)){return this.onFormatHora(e.ms)}if(jQuery.isNumeric(e)){return e}else{try{var r=e.getUTCDate();r=String(r).length==1?"0"+String(r):String(r);var t=e.getUTCMonth()+1;t=String(t).length==1?"0"+String(t):String(t);var o=e.getUTCFullYear();return r+"/"+t+"/"+o}catch(r){return e}}},formatPeriodo:function(e){if(e!==null&&e!==undefined){return e.substring(0,3)+"/"+e.substring(3,e.length)}},onFormatCnpj:function(e){if(e!=""&&e!==null&&e!=undefined){e=e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5");return e}},onFormatCancelaSaldo:function(e){if(e!=undefined){if(e=="S"){return"Não"}else if(e=="N"){return"Sim"}}},onFormatTelefone:function(e){var r=(""+e).replace(/\D/g,"");var t=r.match(/^(\d{2})(\d{4})(\d{4})$/);if(t){return"("+t[1]+") "+t[2]+"-"+t[3]}return null},myFormatterHora:function(e){if(e!==undefined&&e!==null&&e!==""&&e!==0){var r=e.split(":");return r[0]+":"+r[1]}},myFormatterData:function(e){if(e!==undefined&&e!==null&&e!==""&&e!==0){var r=e.split("/");e=r[0]+"/"+r[1];return e}},onFormatNumberPedido:function(e){for(var r in e){if(r!="Completo"&&r!="CheckIncentivo"&&r!="EnviarEmailCliente"&&r!="DataIniConv"&&r!="EnviarEmailRepres"&&r!="LogVerbaRentNeg"&&r!="TotalItens"&&r!="LogProposta"){e[r]=String(e[r])}if(r=="PedidoOrigem"){e[r]=e[r].replace(/\s/g,"")}if(r=="LogVerbaRentNeg"||r=="LogProposta"){e[r]=String(e[r])=="true"?true:false}if(e[r]=="isNaN"){e[r]="0.00"}}return e},onBuscarPedidos:function(e,r,t,o,n,i){i.oModel.read("/P_PedidoQ",{urlParameters:{$filter:"IvUsuario eq '"+r+"' and IvKunnr eq '"+e+"' and IvEnvio eq "+t},success:function(e){o(e.results)},error:function(e){n(e)}})},onBuscarProdutos:function(e,r,t,o,n){n.oModel.read("/Produtos",{urlParameters:{$filter:"Usuario eq '"+e+"' and Werks eq '"+r+"'"},success:function(e){t(e.results)},error:function(e){o(e)}})},onBuscarTipoPedido:function(e,r,t,o,n,i,a,s){s.oModel.read("/P_TipoPedidosR(IvRepres='"+e+"',IvCliente='"+r+"',IvCentro='"+t+"',IvKvgr4='"+o+"',IvKvgr5='"+n+"')",{success:function(e){i(e)},error:function(e){a(e)}})},onBuscarClienteEmpresa:function(e,r,t,o,n){n.oModel.read("/P_Cliente_Empresa(Kunnr='"+e+"',Vkorg='"+r+"')",{success:function(e){t(e)},error:function(e){o(e)}})},onBuscarTabelaPreco:function(e,r,t,o,n){n.oModel.read("/P_TabPrecos(IvKunnr='"+e.Kunnr+"',IvBukrs='"+e.Bukrs+"',IvRepres='"+r+"')",{success:function(r){n.vetorTabPrecos=[];n.vetorTabPrecos.push(r);if(r.Pltyp!=e.Pltyp&&e.Pltyp!=""){var o={Pltyp:e.Pltyp,Ptext:e.PltypDesc};n.vetorTabPrecos.push(o)}n.getModel("modelTabPrecos").setData(n.vetorTabPrecos);t()},error:function(e){n.onMensagemErroODATA(e)}})},onBuscarPedido:function(e,r,t,o){o.oModel.read("/P_PedidoPR(NrPedido='"+e+"')",{success:function(e){r(e)},error:function(e){t(e)}})},onInserirPedido:function(e,r,t,o){o.oModel.create("/P_PedidoPR",e,{method:"POST",success:function(e){r(e)},error:function(e){t(e)}})},onInserirBP:function(e,r,t,o){o.oModel.create("/P_CriarBP",IDBOpenDBRequest,{method:"POST",success:function(e){r(e)},error:function(e){t(e)}})},onBuscarVencimentos:function(e,r,t){t.oModel.read("/Vencimentos",{success:function(r){e(r.results)},error:function(e){r(e)}})},onBuscarCentros:function(e,r,t,o){o.oModel.read("/Centros",{urlParameters:{$filter:"IvUsuario eq '"+e+"'"},success:function(e){r(e.results)},error:function(e){t(e)}})},onBuscarItensPedido:function(e,r,t){var o=this;o.oModel.read("/P_ItensPedidoQ",{urlParameters:{$filter:"IvNrPedido eq '"+t+"'"},success:function(r){e(r.results)},error:function(e){r(e)}})},onDeletarItemPedido:function(e,r,t,o){var n=this;n.oModel.remove("/P_ItensPedidoD(IvNrPedido='"+t+"',IvMatnr='"+o+"')",{success:function(r){e("OK")},error:function(e){r(e)}})},onBuscarClientes:function(e,r,t,o){o.oModel.read("/ClienteQ",{urlParameters:{$filter:"IvUsuario eq '"+e+"'"},success:function(e){r(e.results)},error:function(e){t(e)}})},onBuscarRedesClientes:function(e,r,t,o,n){n.oModel.read("/P_ClientesRedes",{urlParameters:{$filter:"Usuario eq '"+e+"' and Vkorg eq '"+r+"'"},success:function(e){t(e.results)},error:function(e){o(e)}})},onBuscarRedesClientesRange:function(e,r,t){t.oModel.read("/P_ClientesRedesRangeSet",{success:function(r){e(r.results)},error:function(e){r(e)}})},onBuscarStatusPedido:function(e,r,t,o,n){n.oModel.read("/P_StatusPedido(IvNf='"+e+"',IvWerks='"+r+"')",{success:function(e){t(e)},error:function(e){o(e)}})},onFormatNumberItem:function(e){for(var r in e){if(r!="QtdPedida"&&r!="IndexItem"&&r!="ExcIncent"&&r!="ExcVerba"&&r!="DataUltCompraUltMes"){e[r]=String(e[r])}if(r=="ExcIncent"||r=="ExcVerba"||r=="Draft"){e[r]=String(e[r])=="true"?true:false}}return e},myFormatterDataMobile:function(e){if(e!=undefined){try{var r=e.indexOf("T");if(r>0){r=e.split("T");r=r[0].split("-");return r[2]+"/"+r[1]+"/"+r[0]}}catch(r){var t=e;var o=String(t.getFullYear());var n=t.getMonth()+1;var n=String(n).length==1?"0"+String(n):String(n);var i=t.getDate();var i=String(i).length==1?"0"+String(i+1):String(i+1);return i+"/"+n+"/"+o}}},myFormatterData2:function(e){if(e!==undefined&&e!==null&&e!==""&&e!==0){var r=e.split("/");e=r[0]+"/"+r[1];var r=new Date(Date.UTC(r[2],r[1],r[0]));return r}},onFormatCpf:function(e){if(e!=""&&e!==null&&e!=undefined){e=e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4");return e}},onFormatSimplesNacional:function(e){if(e!=undefined){if(e=="SN"){return"Sim"}else{return"Não"}}},myFormatterDataInvert:function(e){if(e!=undefined){return e.substring(6,8)+"/"+e.substring(4,6)+"/"+e.substring(0,4)}},myFormatterDataRevert:function(e){if(e!=undefined){var r=e.split("/");return[String(r[2])+String(r[1])+String(r[0]),{dia:String(r[0]),mes:String(r[1]),ano:String(r[2])}]}},onExcluirPed:function(e,r,t){var o=this;o.oModel.remove("/P_PedidoD(IvNrPedido='"+e+"')",{success:function(e){r()},error:function(e){t(e)}})},onCheckOnline:function(e,r,t){var o=this;var n=o.getModelGlobal("modelAux").getData();n.DBModel.read("/CheckOnline(IvUsuario='"+n.CodRepres+"',IvSenha='"+n.Senha+"',IvSistOper='"+n.SistemaOper+"',IvImei='"+n.Imei+"',IvRetirarCheck="+t+",IvVersaoApp='"+n.VersaoApp+"')",{success:function(r){e()},error:function(e){console.log(e);r(e)}})},onDataHora:function(){var e=new Date;var r=String(e.getDate());var t=String(e.getMonth()+1);var o=String(e.getFullYear());var n=String(e.getMinutes());var i=String(e.getHours());var a=String(e.getSeconds());if(r.length==1){r=String("0"+r)}if(t.length==1){t=String("0"+t)}if(n.length==1){n=String("0"+n)}if(i.length==1){i=String("0"+i)}if(a.length==1){a=String("0"+a)}var s={dia:r,mes:t,ano:o,hora:i,min:n,seg:a};var u=String(r+"/"+t+"/"+o);var c=String(i)+":"+String(n)+":"+String(a);return[u,c,s]},onFormatterText:function(e){if(e!=undefined){if(e.length>20){return e.substring(0,20)}else{return e}}},onMensagemErroODATA:function(e){if(e.responseText==undefined){if(e.response==undefined){t=String(e)}else{var r=e.response.body;if(r==undefined){var t=e.message}else{var o=new DOMParser;var n=o.parseFromString(r,"text/xml");try{var i=n.getElementsByTagName("message")[0].childNodes[0].nodeValue}catch(e){var i=n.getElementsByTagName("body")[0].childNodes[0].textContent}t=i}}}else{try{t=JSON.parse(e.responseText)["error"].message.value}catch(r){var o=new DOMParser;var n=o.parseFromString(e.responseText,"text/xml");try{var i=n.getElementsByTagName("message")[0].childNodes[0].nodeValue}catch(e){var i=n.getElementsByTagName("body")[0].childNodes[0].textContent}t=i}}sap.m.MessageBox.show(t,{icon:sap.m.MessageBox.Icon.WARNING,title:"Erro!",actions:[sap.m.MessageBox.Action.OK],onClose:function(e){}})},onCriarBP:function(e,r,t,o){o.oModel.callFunction("/P_CriarBP",{method:"POST",urlParameters:e,success:function(e,t){r(e)},error:function(e){t(e)}})},onDialogCancelar:function(){if(this._ItemDialog){this._ItemDialog.destroy(true)}},onTile:function(e){switch(e.getSource().data("opcao")){case"P01":sap.ui.core.UIComponent.getRouterFor(this).navTo("pedido");break;case"P02":sap.ui.core.UIComponent.getRouterFor(this).navTo("enviarPedidos");break;case"P03":sap.ui.core.UIComponent.getRouterFor(this).navTo("menuRelatorios");break;case"P04":sap.ui.core.UIComponent.getRouterFor(this).navTo("menuConsultas");break;case"P05":sap.ui.core.UIComponent.getRouterFor(this).navTo("MsgPortal");break;case"R01":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioPedidos");break;case"R02":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioTabelas");break;case"R03":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioTitulos");break;case"R04":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioFaturamentoClientes");break;case"R05":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioFaturamentoItens");break;case"R06":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioNotasFiscais");break;case"A01":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioNotasFiscais");break;case"C01":sap.ui.core.UIComponent.getRouterFor(this).navTo("detalheProdutos");break;case"C02":sap.ui.core.UIComponent.getRouterFor(this).navTo("clienteConsultas");break;case"C03":sap.ui.core.UIComponent.getRouterFor(this).navTo("VerbaConsultas");break;case"C04":sap.ui.core.UIComponent.getRouterFor(this).navTo("cadastroRebaixa");break;case"C05":sap.ui.core.UIComponent.getRouterFor(this).navTo("MovVerbas");break;case"C06":sap.ui.core.UIComponent.getRouterFor(this).navTo("CadastroBP");break;default:sap.ui.core.UIComponent.getRouterFor(this).navTo("notFound");break}},setLog:function(e,r){console.log("["+r+"]",e)},onExpandFiltro:function(e){var r=e.getSource();if(r.getExpanded()){r.setHeaderText("Ocultar Filtros")}else{r.setHeaderText("Exibir Filtros")}},onDialogClose:function(){if(this._ItemDialog){this._ItemDialog.destroy(true)}}})});
//# sourceMappingURL=BaseController.js.map