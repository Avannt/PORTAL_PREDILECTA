sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/core/format/FileSizeFormat"],function(e,t,r,o,n,i){"use strict";return e.extend("application.controller.BaseController",{init:function(){r.prototype.init.apply(this,arguments);this.getRouter().initialize()},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getModelGlobal:function(e){return this.getOwnerComponent().getModel(e)},setModelGlobal:function(e,t){return this.getOwnerComponent().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},onFormatHora:function(e){var t=Math.floor(e%1e3/100),r=Math.floor(e/1e3%60),o=Math.floor(e/(1e3*60)%60),n=Math.floor(e/(1e3*60*60)%24);n=n<10?"0"+n:n;o=o<10?"0"+o:o;r=r<10?"0"+r:r;return n+":"+o+":"+r},onNavBack:function(e){var r,o;r=t.getInstance();o=r.getPreviousHash();if(o!==undefined){window.history.go(-1)}else{this.getRouter().navTo("NotFound",{},true)}},containsSpecialChars:function(e){const t=/[`!@#$%^&*()_+\=\[\]{};':"\\|,<>\?~]/;return t.test(e)},formatAttribute:function(e){if(jQuery.isNumeric(e.ms)){return this.onFormatHora(e.ms)}if(jQuery.isNumeric(e)){return e}else{try{var t=e.getUTCDate();t=String(t).length==1?"0"+String(t):String(t);var r=e.getUTCMonth()+1;r=String(r).length==1?"0"+String(r):String(r);var o=e.getUTCFullYear();return t+"/"+r+"/"+o}catch(t){return e}}},formatPeriodo:function(e){if(e!==null&&e!==undefined){return e.substring(0,3)+"/"+e.substring(3,e.length)}},onFormatCnpj:function(e){if(e!=""&&e!==null&&e!=undefined){e=e.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5");return e}},onFormatCancelaSaldo:function(e){if(e!=undefined){if(e=="S"){return"Não"}else if(e=="N"){return"Sim"}}},onFormatTelefone:function(e){var t=(""+e).replace(/\D/g,"");var r=t.match(/^(\d{2})(\d{4})(\d{4})$/);if(r){return"("+r[1]+") "+r[2]+"-"+r[3]}return null},myFormatterHora:function(e){if(e!==undefined&&e!==null&&e!==""&&e!==0){var t=e.split(":");return t[0]+":"+t[1]}},myFormatterData:function(e){if(e!==undefined&&e!==null&&e!==""&&e!==0){var t=e.split("/");e=t[0]+"/"+t[1];return e}},onFormatNumberPedido:function(e){for(var t in e){if(t!="Completo"&&t!="CheckIncentivo"&&t!="EnviarEmailCliente"&&t!="DataIniConv"&&t!="EnviarEmailRepres"&&t!="LogVerbaRentNeg"&&t!="TotalItens"&&t!="LogProposta"){e[t]=String(e[t])}if(t=="PedidoOrigem"){e[t]=e[t].replace(/\s/g,"")}if(t=="LogVerbaRentNeg"||t=="LogProposta"){e[t]=String(e[t])=="true"?true:false}}return e},onBuscarPedidos:function(e,t,r,o,n,i){i.oModel.read("/P_PedidoQ",{urlParameters:{$filter:"IvUsuario eq '"+t+"' and IvKunnr eq '"+e+"' and IvEnvio eq "+r},success:function(e){o(e.results)},error:function(e){n(e)}})},onBuscarProdutos:function(e,t,r,o,n){n.oModel.read("/Produtos",{urlParameters:{$filter:"Usuario eq '"+e+"' and Werks eq '"+t+"'"},success:function(e){r(e.results)},error:function(e){o(e)}})},onBuscarTipoPedido:function(e,t,r,o,n,i,a,s){s.oModel.read("/P_TipoPedidosR(IvRepres='"+e+"',IvCliente='"+t+"',IvCentro='"+r+"',IvKvgr4='"+o+"',IvKvgr5='"+n+"')",{success:function(e){i(e)},error:function(e){a(e)}})},onBuscarTabelaPreco:function(e,t,r,o,n){n.oModel.read("/P_TabPrecos(IvKunnr='"+e.Kunnr+"',IvBukrs='"+e.Bukrs+"',IvRepres='"+t+"')",{success:function(t){n.vetorTabPrecos=[];n.vetorTabPrecos.push(t);if(t.Pltyp!=e.Pltyp&&e.Pltyp!=""){var o={Pltyp:e.Pltyp,Ptext:e.PltypDesc};n.vetorTabPrecos.push(o)}n.getModel("modelTabPrecos").setData(n.vetorTabPrecos);r()},error:function(e){n.onMensagemErroODATA(e)}})},onBuscarPedido:function(e,t,r,o){o.oModel.read("/P_PedidoPR(NrPedido='"+e+"')",{success:function(e){t(e)},error:function(e){r(e)}})},onInserirPedido:function(e,t,r,o){o.oModel.create("/P_PedidoPR",e,{method:"POST",success:function(e){t(e)},error:function(e){r(e)}})},onInserirBP:function(e,t,r,o){o.oModel.create("/P_CriarBP",IDBOpenDBRequest,{method:"POST",success:function(e){t(e)},error:function(e){r(e)}})},onBuscarVencimentos:function(e,t,r){r.oModel.read("/Vencimentos",{success:function(t){e(t.results)},error:function(e){t(e)}})},onBuscarCentros:function(e,t,r,o){o.oModel.read("/Centros",{urlParameters:{$filter:"IvUsuario eq '"+e+"'"},success:function(e){t(e.results)},error:function(e){r(e)}})},onBuscarItensPedido:function(e,t,r){var o=this;o.oModel.read("/P_ItensPedidoQ",{urlParameters:{$filter:"IvNrPedido eq '"+r+"'"},success:function(t){e(t.results)},error:function(e){t(e)}})},onDeletarItemPedido:function(e,t,r,o){var n=this;n.oModel.remove("/P_ItensPedidoD(IvNrPedido='"+r+"',IvMatnr='"+o+"')",{success:function(t){e("OK")},error:function(e){t(e)}})},onBuscarClientes:function(e,t,r,o){o.oModel.read("/ClienteQ",{urlParameters:{$filter:"IvUsuario eq '"+e+"'"},success:function(e){t(e.results)},error:function(e){r(e)}})},onBuscarStatusPedido:function(e,t,r,o,n){n.oModel.read("/P_StatusPedido(IvNf='"+e+"',IvWerks='"+t+"')",{success:function(e){r(e)},error:function(e){o(e)}})},onFormatNumberItem:function(e){for(var t in e){if(t!="QtdPedida"&&t!="IndexItem"&&t!="ExcIncent"&&t!="ExcVerba"&&t!="DataUltCompraUltMes"){e[t]=String(e[t])}if(t=="ExcIncent"||t=="ExcVerba"||t=="Draft"){e[t]=String(e[t])=="true"?true:false}}return e},myFormatterDataMobile:function(e){if(e!=undefined){try{var t=e.indexOf("T");if(t>0){t=e.split("T");t=t[0].split("-");return t[2]+"/"+t[1]+"/"+t[0]}}catch(t){var r=e;var o=String(r.getFullYear());var n=r.getMonth()+1;var n=String(n).length==1?"0"+String(n):String(n);var i=r.getDate();var i=String(i).length==1?"0"+String(i+1):String(i+1);return i+"/"+n+"/"+o}}},myFormatterData2:function(e){if(e!==undefined&&e!==null&&e!==""&&e!==0){var t=e.split("/");e=t[0]+"/"+t[1];var t=new Date(Date.UTC(t[2],t[1],t[0]));return t}},onFormatCpf:function(e){if(e!=""&&e!==null&&e!=undefined){e=e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4");return e}},onFormatSimplesNacional:function(e){if(e!=undefined){if(e=="SN"){return"Sim"}else{return"Não"}}},myFormatterDataInvert:function(e){if(e!=undefined){return e.substring(6,8)+"/"+e.substring(4,6)+"/"+e.substring(0,4)}},myFormatterDataRevert:function(e){if(e!=undefined){var t=e.split("/");return[String(t[2])+String(t[1])+String(t[0]),{dia:String(t[0]),mes:String(t[1]),ano:String(t[2])}]}},onExcluirPed:function(e,t,r){var o=this;o.oModel.remove("/P_PedidoD(IvNrPedido='"+e+"')",{success:function(e){t()},error:function(e){r(e)}})},onCheckOnline:function(e,t,r){var o=this;var n=o.getModelGlobal("modelAux").getData();n.DBModel.read("/CheckOnline(IvUsuario='"+n.CodRepres+"',IvSenha='"+n.Senha+"',IvSistOper='"+n.SistemaOper+"',IvImei='"+n.Imei+"',IvRetirarCheck="+r+",IvVersaoApp='"+n.VersaoApp+"')",{success:function(t){e()},error:function(e){console.log(e);t(e)}})},onDataHora:function(){var e=new Date;var t=String(e.getDate());var r=String(e.getMonth()+1);var o=String(e.getFullYear());var n=String(e.getMinutes());var i=String(e.getHours());var a=String(e.getSeconds());if(t.length==1){t=String("0"+t)}if(r.length==1){r=String("0"+r)}if(n.length==1){n=String("0"+n)}if(i.length==1){i=String("0"+i)}if(a.length==1){a=String("0"+a)}var s={dia:t,mes:r,ano:o,hora:i,min:n,seg:a};var u=String(t+"/"+r+"/"+o);var c=String(i)+":"+String(n)+":"+String(a);return[u,c,s]},onFormatterText:function(e){if(e!=undefined){if(e.length>20){return e.substring(0,20)}else{return e}}},onMensagemErroODATA:function(e){if(e.responseText==undefined){if(e.response==undefined){r=String(e)}else{var t=e.response.body;if(t==undefined){var r=e.message}else{var o=new DOMParser;var n=o.parseFromString(t,"text/xml");try{var i=n.getElementsByTagName("message")[0].childNodes[0].nodeValue}catch(e){var i=n.getElementsByTagName("body")[0].childNodes[0].textContent}r=i}}}else{try{r=JSON.parse(e.responseText)["error"].message.value}catch(t){var o=new DOMParser;var n=o.parseFromString(e.responseText,"text/xml");try{var i=n.getElementsByTagName("message")[0].childNodes[0].nodeValue}catch(e){var i=n.getElementsByTagName("body")[0].childNodes[0].textContent}r=i}}sap.m.MessageBox.show(r,{icon:sap.m.MessageBox.Icon.WARNING,title:"Erro!",actions:[sap.m.MessageBox.Action.OK],onClose:function(e){}})},onCriarBP:function(e,t,r,o){o.oModel.callFunction("/P_CriarBP",{method:"POST",urlParameters:e,success:function(e,r){t(e)},error:function(e){r(e)}})},onDialogCancelar:function(){if(this._ItemDialog){this._ItemDialog.destroy(true)}},onTile:function(e){switch(e.getSource().data("opcao")){case"P01":sap.ui.core.UIComponent.getRouterFor(this).navTo("pedido");break;case"P02":sap.ui.core.UIComponent.getRouterFor(this).navTo("enviarPedidos");break;case"P03":sap.ui.core.UIComponent.getRouterFor(this).navTo("menuRelatorios");break;case"P04":sap.ui.core.UIComponent.getRouterFor(this).navTo("menuConsultas");break;case"P05":sap.ui.core.UIComponent.getRouterFor(this).navTo("MsgPortal");break;case"R01":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioPedidos");break;case"R02":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioTabelas");break;case"R03":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioTitulos");break;case"R04":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioFaturamentoClientes");break;case"R05":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioFaturamentoItens");break;case"R06":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioNotasFiscais");break;case"A01":sap.ui.core.UIComponent.getRouterFor(this).navTo("relatorioNotasFiscais");break;case"C01":sap.ui.core.UIComponent.getRouterFor(this).navTo("detalheProdutos");break;case"C02":sap.ui.core.UIComponent.getRouterFor(this).navTo("clienteConsultas");break;case"C03":sap.ui.core.UIComponent.getRouterFor(this).navTo("VerbaConsultas");break;case"C04":sap.ui.core.UIComponent.getRouterFor(this).navTo("cadastroRebaixa");break;case"C05":sap.ui.core.UIComponent.getRouterFor(this).navTo("MovVerbas");break;case"C06":sap.ui.core.UIComponent.getRouterFor(this).navTo("CadastroBP");break;default:sap.ui.core.UIComponent.getRouterFor(this).navTo("notFound");break}},setLog:function(e,t){console.log("["+t+"]",e)},onExpandFiltro:function(e){var t=e.getSource();if(t.getExpanded()){t.setHeaderText("Ocultar Filtros")}else{t.setHeaderText("Exibir Filtros")}},onDialogClose:function(){if(this._ItemDialog){this._ItemDialog.destroy(true)}}})});
//# sourceMappingURL=BaseController.js.map